<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Applied Population Genetics on The Dyer Laboratory</title>
    <link>http://dyerlab/categories/applied-population-genetics/index.xml</link>
    <description>Recent content in Applied Population Genetics on The Dyer Laboratory</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <atom:link href="http://dyerlab/categories/applied-population-genetics/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Collab &lt;- Slack &#43; R</title>
      <link>http://dyerlab/2016/07/collab---slack-&#43;-r/</link>
      <pubDate>Fri, 08 Jul 2016 00:00:00 +0000</pubDate>
      
      <guid>http://dyerlab/2016/07/collab---slack-&#43;-r/</guid>
      <description>&lt;!-- BLOGDOWN-BODY-BEFORE

/BLOGDOWN-BODY-BEFORE --&gt;

&lt;p&gt;I just ran across an R package that allows you to integrate your R workflow into the &lt;a href=&#34;http://www.slack.com&#34;&gt;Slack&lt;/a&gt; environment. Really cool. Below I show how to set it up and to post output of your analyses to slack channels for your team as well as to register notifications.&lt;/p&gt;
&lt;p&gt;First things first, I recommend installing the latest version from the &lt;a href=&#34;https://github.com/hrbrmstr/slackr&#34;&gt;github&lt;/a&gt; repository.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(devtools)
install_github(&amp;quot;hrbrmstr/slackr&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now you have to set up a config file.  I think it looks for it in&lt;/p&gt;
&lt;pre class=&#34;bash&#34;&gt;&lt;code&gt;~/.slackr&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It is a normal Debian Control File (DCF) format. Here is my example one:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;api_token: xoxp-XXXXXXXXXXX-XXXXXXXXX-XXXXXXXXXX-XXXXXXXXX
channel: #r
username: rodney
incoming_webhook_url: https://hooks.slack.com/services/XXXXXXXX/XXXXXXXX/XXXXXXXX&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You need to get the api_token and the &lt;code&gt;incoming_webhook_url&lt;/code&gt; from slack itself. Once you have that file saved, when you want to setup the slackr environment, you load it in and can send messages such as:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;require(slackr)
slackr_setup()
slackr(&amp;quot;This is an incoming piece of text from RStudio&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which results in the following in my #r slack channel:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://dyerlab./Users/rodney/Desktop/dyerlabweb/static/img/slack_msg_from_r.png&#34; alt=&#34;Slack message from R&#34; /&gt; There is also a provision for sending output graphics like ggplot objects. Here&lt;/p&gt;
&lt;p&gt;is an example of heterozygosity in the Arapat data set.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(gstudio)
library(ggplot2)
data(arapat)
he &amp;lt;- genetic_diversity(arapat,mode=&amp;quot;He&amp;quot;)
p &amp;lt;- ggplot( he, aes(x=Locus, y=He)) + geom_bar(stat=&amp;quot;identity&amp;quot;) + theme_bw()
ggslack(p)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Which directly uploads the image to the channel as: &lt;img src=&#34;http://dyerlab./Users/rodney/Desktop/dyerlabweb/static/img/slack_plot.png&#34; alt=&#34;Slack image from R&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Very Cool!&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;There is a slight problem though. The current version of the slackr library has an error in it associated with (perhaps) a recent change in the Slack API that has not been fixed by the developer.&lt;/p&gt;
&lt;p&gt;For me to get this to work, I had to compile the package myself after making the following change in one file.  To fix it, do the following:&lt;br /&gt;
- Download (or checkout) the repository from github at:&lt;br /&gt;
&lt;a href=&#34;https://github.com/hrbrmstr/slackr&#34; class=&#34;uri&#34;&gt;https://github.com/hrbrmstr/slackr&lt;/a&gt;&lt;br /&gt;
- Open the project in RStudio&lt;br /&gt;
- Open the R file names &lt;code&gt;slackr_utils.R&lt;/code&gt;&lt;br /&gt;
- In the function named &lt;code&gt;slackr_ims&lt;/code&gt; the last line (line 117) is something like &lt;code&gt;dplyr::left_join( %some stuff% )&lt;/code&gt;&lt;br /&gt;
- Replace this line with &lt;code&gt;suppressWarnings( merge(users, ims, by.x=&amp;quot;id&amp;quot;, by.y=&#39;user&#39;) )&lt;/code&gt;&lt;br /&gt;
- The compile and install the package as below and it should all be fine:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;require(devtools)
load_all()
build()
install()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Hopefully, on the next time that this package is updated by the author, the &lt;code&gt;left_join()&lt;/code&gt; problem will have been resolved. This issue had been marked as “resolved” in the github issues a while back but apparently not pushed to the repository.&lt;/p&gt;


&lt;!-- BLOGDOWN-HEAD




/BLOGDOWN-HEAD --&gt;
</description>
    </item>
    
    <item>
      <title>STRUCTURE on OSX</title>
      <link>http://dyerlab/2016/04/structure-on-osx/</link>
      <pubDate>Tue, 05 Apr 2016 00:00:00 +0000</pubDate>
      
      <guid>http://dyerlab/2016/04/structure-on-osx/</guid>
      <description>&lt;p&gt;The program STRUCTURE is an ubiquitous feature of many population genetic studies these days—if it is appropriate is another question. Today, while covering model based clustering in population genetics, we ran into a problem where STRUCTURE was unable to run and the OS said it was Corrupted and should be thrown away.  Jump below for our fix, it really is an easy one.
more
The most recent version of the GUI STRUCTURE java package dates from 2012.  This is getting a bit long in the tooth, but when teaching it is not that far fetched to have aged laptops&amp;hellip;
The error we were running into is the prompted with the following dialog box when attempting to start the program.
&lt;img src=&#34;http://dyerlab.bio.vcu.edu/wp-content/uploads/sites/4831/2016/04/Screen-Shot-2016-04-05-at-2.46.30-PM-1024x380.png&#34; alt=&#34;Screen Shot 2016-04-05 at 2.46.30 PM&#34; /&gt;
As it turns out, sometime between 2012 and now, OSX has moved towards digitally signing applications and in this case, it is not that it is &amp;ldquo;damaged&amp;rdquo; it just won&amp;rsquo;t allow the Java Runtime to run it unless we make a small change in the preferences panel and select the Security &amp;amp; Privacy option.
&lt;img src=&#34;http://dyerlab.bio.vcu.edu/wp-content/uploads/sites/4831/2016/04/Screen-Shot-2016-04-05-at-2.48.22-PM-142x150.png&#34; alt=&#34;Screen Shot 2016-04-05 at 2.48.22 PM&#34; /&gt;
Then authenticate on the bottom by clicking on the lock and entering your password.
&lt;img src=&#34;http://dyerlab.bio.vcu.edu/wp-content/uploads/sites/4831/2016/04/Screen-Shot-2016-04-05-at-2.48.00-PM-300x74.png&#34; alt=&#34;Screen Shot 2016-04-05 at 2.48.00 PM&#34; /&gt;
Now, change the setting on the Allow apps downloaded from to the Anywhere option.
&lt;img src=&#34;http://dyerlab.bio.vcu.edu/wp-content/uploads/sites/4831/2016/04/Screen-Shot-2016-04-05-at-2.49.36-PM-300x98.png&#34; alt=&#34;Screen Shot 2016-04-05 at 2.49.36 PM&#34; /&gt;
This should allow you to start STRUCTURE and run it.  Do that and then close it.  Go back to the System Preferences and turn it back to what you had it before.
&lt;img src=&#34;http://dyerlab.bio.vcu.edu/wp-content/uploads/sites/4831/2016/04/Screen-Shot-2016-04-05-at-2.51.22-PM-300x101.png&#34; alt=&#34;Screen Shot 2016-04-05 at 2.51.22 PM&#34; /&gt;
Once you run it once, you will be able to run it again without lowering your security. Happy clustering!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Cropping Rasters</title>
      <link>http://dyerlab/2016/03/cropping-rasters/</link>
      <pubDate>Fri, 18 Mar 2016 00:00:00 +0000</pubDate>
      
      <guid>http://dyerlab/2016/03/cropping-rasters/</guid>
      <description>&lt;!-- BLOGDOWN-BODY-BEFORE

/BLOGDOWN-BODY-BEFORE --&gt;

&lt;p&gt;It is often the case that the raster we are working with is not the exact size of the area from which our data are collected. It is a much easier situation if the raster is larger than the area than if you need to stitch together two raster Tiles to get all your data onto one extent. In my doctoral thesis work, the area of the southern Ozark mountains that my sites were in was not only straddling a boundary between existing rasters, it was also at the boundary of two UTM zones! What a pain. Spatial data often consists of very large datasets. One way to minimize the amount of computational resources you are going to use in R is to select only the spatial regions (extents) that you are working in and get rid of the remaining data. This is particularly important if you are going to be doing isolation modeling for genetic connectivity as the cost surface raster needs to be translated into a connectivity network. Data outside your area of interest are unnecessarily taking both resources and time away from your work. To crop a raster, we need to identify the region we wish to keep as an extent object. An extent is a vector of length 4 defined as &lt;code&gt;c(xmin, xmax, ymin, ymax)&lt;/code&gt; describing the boundaries of are of interest. Here is an extent for the arapat data set.require(gstudio)&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(raster)
library(gstudio)
data(arapat)
lon.min &amp;lt;- min(arapat$Longitude)
lon.max &amp;lt;- max(arapat$Longitude)
lat.min &amp;lt;- min(arapat$Latitude)
lat.max &amp;lt;- max(arapat$Latitude)
e &amp;lt;- extent( lon.min, lon.max, lat.min, lat.max )
e&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## class       : Extent 
## xmin        : -114.2935 
## xmax        : -109.1263 
## ymin        : 23.0757 
## ymax        : 29.32541&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is the exact boundaries of the data set. However, it is probably a good idea to not have your map cropped exactly to your boundaries but have your most extreme locations plotted within the map boundaries. So I’ll take an approximation (rounding up and down as necessary) to use.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;e &amp;lt;- extent( -115, -108, 23, 30 )
e&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## class       : Extent 
## xmin        : -115 
## xmax        : -108 
## ymin        : 23 
## ymax        : 30&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This can now be used as the area from within the alt raster that we want to keep.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;alt &amp;lt;- raster( &amp;quot;../../data/alt_22.tif&amp;quot; )
bc &amp;lt;- crop( alt, e )
bc&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## class       : RasterLayer 
## dimensions  : 840, 840, 705600  (nrow, ncol, ncell)
## resolution  : 0.008333333, 0.008333333  (x, y)
## extent      : -115, -108, 23, 30  (xmin, xmax, ymin, ymax)
## coord. ref. : +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0 
## data source : in memory
## names       : alt_22 
## values      : -202, 2774  (min, max)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And if we plot it, we see that it is more properly scaled for the region we are interested in working on.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(bc)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;http://dyerlab/2016/03/cropping-rasters/figures/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;


&lt;!-- BLOGDOWN-HEAD




/BLOGDOWN-HEAD --&gt;
</description>
    </item>
    
    <item>
      <title>Effective Population Size</title>
      <link>http://dyerlab/2016/02/effective-population-size/</link>
      <pubDate>Fri, 19 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>http://dyerlab/2016/02/effective-population-size/</guid>
      <description>&lt;p&gt;How big is the data set you are analyzing?  Apparently it depends on how you count&amp;hellip;
more
[embed]&lt;a href=&#34;https://youtu.be/JV85sUANwYQ[/embed&#34;&gt;https://youtu.be/JV85sUANwYQ[/embed&lt;/a&gt;]&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Chapter 2: Hardy-Weinberg Equilibrium</title>
      <link>http://dyerlab/2016/02/chapter-2-hardy-weinberg-equilibrium/</link>
      <pubDate>Fri, 05 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>http://dyerlab/2016/02/chapter-2-hardy-weinberg-equilibrium/</guid>
      <description>&lt;p&gt;Here are the online presentations for Chapter 2: Hardy Weinberg Equilibrium from the upcoming text,
Applied Population Genetics.  More information on this text can be found
&lt;a href=&#34;http://dyerlab.bio.vcu.edu/applied-population-genetics/&#34;&gt;here&lt;/a&gt;.
more
[embed]&lt;a href=&#34;https://youtu.be/s5Z0nItrdSo[/embed&#34;&gt;https://youtu.be/s5Z0nItrdSo[/embed&lt;/a&gt;]&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>A quick GGMap Tutorial</title>
      <link>http://dyerlab/2016/01/a-quick-ggmap-tutorial/</link>
      <pubDate>Sun, 17 Jan 2016 00:00:00 +0000</pubDate>
      
      <guid>http://dyerlab/2016/01/a-quick-ggmap-tutorial/</guid>
      <description>&lt;p&gt;[embed]&lt;a href=&#34;https://youtu.be/x1QQgKT4M9g[/embed&#34;&gt;https://youtu.be/x1QQgKT4M9g[/embed&lt;/a&gt;]&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Chapter 1: Learning R</title>
      <link>http://dyerlab/2016/01/chapter-1-learning-r/</link>
      <pubDate>Fri, 15 Jan 2016 00:00:00 +0000</pubDate>
      
      <guid>http://dyerlab/2016/01/chapter-1-learning-r/</guid>
      <description>&lt;p&gt;Here are the presentations for Chapter 1: Learning R from the upcoming text
Applied Population Genetics.  More information on this text can be found
&lt;a href=&#34;http://dyerlab.bio.vcu.edu/applied-population-genetics/&#34;&gt;here&lt;/a&gt;.
more
[embed]&lt;a href=&#34;https://youtu.be/Xz5EgzV2S58[/embed&#34;&gt;https://youtu.be/Xz5EgzV2S58[/embed&lt;/a&gt;]
[embed]&lt;a href=&#34;https://youtu.be/HLX397T5yqw[/embed&#34;&gt;https://youtu.be/HLX397T5yqw[/embed&lt;/a&gt;]
[embed]&lt;a href=&#34;https://youtu.be/lCpw22x9xbQ[/embed&#34;&gt;https://youtu.be/lCpw22x9xbQ[/embed&lt;/a&gt;]
[embed]&lt;a href=&#34;https://youtu.be/V9pR4busgDc[/embed&#34;&gt;https://youtu.be/V9pR4busgDc[/embed&lt;/a&gt;]
[embed]&lt;a href=&#34;https://youtu.be/uH67vNs5CZI[/embed&#34;&gt;https://youtu.be/uH67vNs5CZI[/embed&lt;/a&gt;]&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
